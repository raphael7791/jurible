/**
 * Method Tabs Block - Frontend Styles
 * Version 2.1 - Optimized with theme.json CSS custom properties
 *
 * IMPORTANT: SCSS variables below mirror theme.json values for rgba() computations.
 * Keep them in sync with theme.json palette.
 */

// =============================================================================
// SCSS Variables (for rgba() computations - must match theme.json)
// =============================================================================
$primary: #B0001D;       // --wp--preset--color--primary
$primary-hover: #DC2626; // --wp--preset--color--primary-hover
$secondary: #7C3AED;     // --wp--preset--color--secondary

// =============================================================================
// CSS Custom Properties Aliases (for readability)
// =============================================================================
$c-primary: var(--wp--preset--color--primary);
$c-primary-hover: var(--wp--preset--color--primary-hover);
$c-secondary: var(--wp--preset--color--secondary);
$c-secondary-bg: var(--wp--preset--color--secondary-bg);
$c-accent-bg: var(--wp--preset--color--accent-bg);
$c-success: var(--wp--preset--color--success);
$c-success-dark: var(--wp--preset--color--success-dark);
$c-success-bg: var(--wp--preset--color--success-bg);
$c-error: var(--wp--preset--color--error);
$c-error-bg: var(--wp--preset--color--error-bg);
$c-warning: var(--wp--preset--color--warning);
$c-warning-bg: var(--wp--preset--color--warning-bg);
$c-warning-text: var(--wp--preset--color--warning-text);
$c-info: var(--wp--preset--color--info);
$c-info-bg: var(--wp--preset--color--info-bg);
$c-text-dark: var(--wp--preset--color--text-dark);
$c-text-gray: var(--wp--preset--color--text-gray);
$c-text-muted: var(--wp--preset--color--text-muted);
$c-border: var(--wp--preset--color--border);
$c-muted: var(--wp--preset--color--muted);
$c-white: var(--wp--preset--color--white);

// Gradient from theme.json
$gradient-cta: var(--wp--preset--gradient--cta-gradient);

// Shadows from theme.json
$shadow-sm: var(--wp--preset--shadow--sm);
$shadow-md: var(--wp--preset--shadow--md);
$shadow-lg: var(--wp--preset--shadow--lg);
$shadow-cta: var(--wp--preset--shadow--cta);
$shadow-cta-hover: var(--wp--preset--shadow--cta-hover);

// Spacing from theme.json
$space-xs: var(--wp--preset--spacing--xs);
$space-sm: var(--wp--preset--spacing--sm);
$space-md: var(--wp--preset--spacing--md);
$space-lg: var(--wp--preset--spacing--lg);
$space-xl: var(--wp--preset--spacing--xl);

// Font family from theme.json
$font-family: var(--wp--preset--font-family--poppins);

// Font sizes from theme.json
$font-caption: var(--wp--preset--font-size--caption);
$font-small: var(--wp--preset--font-size--small);
$font-medium: var(--wp--preset--font-size--medium);
$font-body-large: var(--wp--preset--font-size--body-large);

// Border radius from theme.json
$radius-xs: var(--wp--preset--border-size--xs, 4px);
$radius-sm: var(--wp--preset--border-size--sm, 6px);
$radius-md: var(--wp--preset--border-size--md, 8px);
$radius-lg: var(--wp--preset--border-size--lg, 12px);
$radius-full: var(--wp--preset--border-size--full, 9999px);

// =============================================================================
// MAIN BLOCK STYLES
// =============================================================================
.wp-block-jurible-method-tabs {
	font-family: $font-family;
	background: $c-accent-bg;
	padding: $space-xl $space-md;
	position: relative;
	overflow: hidden;
	margin-block-start: 0 !important; // Override WordPress default spacing

	&::before {
		content: '';
		position: absolute;
		top: -200px;
		right: -200px;
		width: 500px;
		height: 500px;
		background: radial-gradient(circle, rgba($secondary, 0.05) 0%, transparent 70%);
		pointer-events: none;
	}

	/* ═══════════════════════════════════════════
	   HEADER
	   ═══════════════════════════════════════════ */
	.method-tabs__header {
		text-align: center;
		margin-bottom: $space-lg;
		position: relative;
		z-index: 1;
	}

	.method-tabs__badge {
		display: inline-flex;
		align-items: center;
		gap: 6px;
		font-size: $font-caption;
		font-weight: 600;
		padding: 6px 16px;
		border-radius: $radius-full;
		margin-bottom: $space-sm;

		svg {
			width: 14px;
			height: 14px;
		}

		&--green {
			background: rgba(16, 185, 129, 0.15); // success with opacity
			color: $c-success-dark;
		}
	}

	.method-tabs__title {
		font-size: clamp(28px, 4vw, 42px);
		font-weight: 800;
		line-height: 1.2;
		margin: 0 0 $space-xs;
		color: $c-text-dark;

		mark {
			background: $gradient-cta;
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}
	}

	.method-tabs__subtitle {
		font-size: $font-body-large;
		line-height: var(--wp--custom--line-height--body);
		color: $c-text-gray;
		font-weight: 400;
		margin: 0;
	}

	/* ═══════════════════════════════════════════
	   TABS NAVIGATION
	   ═══════════════════════════════════════════ */
	.method-tabs__nav {
		display: flex;
		flex-wrap: wrap;
		justify-content: center;
		gap: $space-xs;
		margin-bottom: $space-lg;
		position: relative;
		z-index: 1;
	}

	.method-tabs__tab {
		display: inline-flex;
		align-items: center;
		gap: 6px;
		padding: 10px 20px;
		border: 1.5px solid $c-border;
		border-radius: $radius-full;
		background: $c-white;
		color: $c-text-gray;
		font-family: inherit;
		font-size: $font-small;
		font-weight: 500;
		cursor: pointer;
		transition: all 0.25s ease;
		white-space: nowrap;

		&:hover {
			border-color: $c-secondary;
			color: $c-secondary;
			background: $c-accent-bg;
		}

		&.is-active {
			background: $gradient-cta;
			color: $c-white;
			border-color: transparent;
			box-shadow: $shadow-cta;
		}
	}

	.method-tabs__tab-icon {
		font-size: $font-medium;
		line-height: 1;
	}

	.method-tabs__tab-label--short {
		display: none;
	}

	/* ═══════════════════════════════════════════
	   CARD CONTAINER
	   ═══════════════════════════════════════════ */
	.method-tabs__card {
		max-width: 1060px;
		margin: 0 auto;
		background: $c-white;
		border-radius: 20px;
		box-shadow: $shadow-sm;
		overflow: hidden;
		min-height: 420px;
		position: relative;
		z-index: 1;
		border: 1px solid $c-muted;
		transition: box-shadow 0.3s ease;

		&:hover {
			box-shadow: $shadow-md;
		}
	}

	.method-tabs__panel {
		display: none;
		animation: methodTabsFadeIn 0.35s ease;

		&.is-active {
			display: block;
		}
	}

	@keyframes methodTabsFadeIn {
		from {
			opacity: 0;
			transform: translateY(8px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	/* ═══════════════════════════════════════════
	   EXAMPLE BANNER
	   ═══════════════════════════════════════════ */
	.method-tabs__example-banner {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: $space-xs;
		background: linear-gradient(90deg, $c-accent-bg, $c-secondary-bg);
		color: $c-secondary;
		font-size: $font-caption;
		font-weight: 600;
		padding: 10px 16px;
		border-bottom: 1px solid rgba($secondary, 0.15);
	}

	.method-tabs__example-banner-icon {
		font-size: $font-medium;
	}

	/* ═══════════════════════════════════════════
	   SPLIT LAYOUT (Vidéo, Mindmap)
	   ═══════════════════════════════════════════ */
	.method-tabs__split {
		display: grid;
		grid-template-columns: 1.1fr 0.9fr;
		gap: 0;
		min-height: 420px;
	}

	.method-tabs__split-visual {
		position: relative;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
		background: $gradient-cta;

		&--mindmap {
			background: $c-accent-bg;
			padding: $space-md;
		}
	}

	.method-tabs__split-info {
		padding: 40px 36px;
		display: flex;
		flex-direction: column;
		justify-content: center;

		h3 {
			font-size: 20px;
			font-weight: 700;
			margin: 0 0 $space-xs;
			color: $c-text-dark;
		}

		p {
			font-size: $font-small;
			line-height: 1.7;
			color: $c-text-gray;
			margin: 0;
		}
	}

	/* ═══════════════════════════════════════════
	   VIDEO PLAYER
	   ═══════════════════════════════════════════ */
	.method-tabs__video-player {
		width: 100%;
		height: 100%;
		position: relative;

		iframe {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			border: 0;
		}
	}

	.method-tabs__video-placeholder {
		width: 100%;
		height: 100%;
		min-height: 320px;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		position: relative;
	}

	.method-tabs__play-btn {
		width: 72px;
		height: 72px;
		background: rgba(255, 255, 255, 0.2);
		backdrop-filter: blur(8px);
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		transition: all 0.3s ease;
		border: 2px solid rgba(255, 255, 255, 0.3);

		svg {
			width: 28px;
			height: 28px;
			color: $c-white;
			margin-left: 4px;
		}

		&:hover {
			background: rgba(255, 255, 255, 0.35);
			transform: scale(1.08);
		}
	}

	.method-tabs__video-overlay {
		position: absolute;
		bottom: 48px;
		left: 24px;
		color: $c-white;
		font-size: $font-small;
		font-weight: 500;
		text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
	}

	/* ═══════════════════════════════════════════
	   MINDMAP
	   ═══════════════════════════════════════════ */
	.method-tabs__mindmap-img {
		max-width: 100%;
		max-height: 100%;
		width: auto;
		height: auto;
		object-fit: contain;
		border-radius: $radius-md;
	}

	.method-tabs__mindmap-svg {
		width: 100%;
		max-width: 440px;
	}

	/* ═══════════════════════════════════════════
	   FICHE (Cours écrits)
	   ═══════════════════════════════════════════ */
	.method-tabs__fiche {
		position: relative;
	}

	.method-tabs__fiche-content {
		padding: 36px 40px;
		max-height: 460px;
		overflow-y: auto;

		&::-webkit-scrollbar {
			width: 4px;
		}
		&::-webkit-scrollbar-thumb {
			background: $c-border;
			border-radius: $radius-xs;
		}

		h2 {
			font-size: 1.375rem;
			font-weight: 600;
			line-height: 1.4;
			color: $c-text-dark;
			margin-top: 26px;
			margin-bottom: 26px;

			&::after {
				content: '';
				display: block;
				width: 60px;
				height: 3px;
				background: linear-gradient(90deg, $c-primary 0%, $c-secondary 100%);
				margin-top: $space-xs;
				border-radius: 2px;
			}
		}

		h3 {
			font-size: 1rem;
			font-weight: 600;
			line-height: 1.4;
			margin: 0 0 $space-xs;
			color: $c-text-dark;

			&:not(:first-child) {
				margin-top: 20px;
			}
		}

		h4 {
			font-size: 17px;
			font-weight: 700;
			margin: $space-md 0 $space-xs;
			color: $c-text-dark;
		}

		h5 {
			font-size: 15px;
			font-weight: 600;
			margin: $space-sm 0 $space-xs;
			color: $c-text-dark;
		}
	}

	.method-tabs__fiche-meta {
		font-size: $font-caption;
		color: $c-text-muted;
		margin-bottom: $space-md;
	}

	.method-tabs__theme-title {
		font-size: $font-medium;
		line-height: 1.5;
		color: $c-text-dark;
		margin: 20px 0 $space-sm;
	}

	.method-tabs__notice {
		display: flex;
		align-items: center;
		gap: $space-xs;
		padding: 10px 16px;
		background: $c-warning-bg;
		border-left: 3px solid $c-warning;
		font-size: $font-caption;
		color: $c-warning-text;
		line-height: 1.5;
	}

	.method-tabs__notice-icon {
		flex-shrink: 0;
	}

	.method-tabs__body-text {
		font-size: $font-small;
		line-height: 1.8;
		color: $c-text-gray;
		margin: 0 0 $space-xs;
	}

	.method-tabs__bloc {
		padding: $space-sm 20px;
		border-radius: 0 $radius-md $radius-md 0;
		margin: $space-sm 0;

		&--definition {
			border-left: 4px solid $c-secondary;
			background: $c-accent-bg;
		}

		&--attention {
			border-left: 4px solid $c-primary-hover;
			background: $c-error-bg;
		}

		p {
			font-size: $font-small;
			line-height: 1.7;
			color: $c-text-dark;
			margin: 0;
		}
	}

	.method-tabs__bloc-label {
		display: inline-flex;
		align-items: center;
		gap: 6px;
		font-size: 11px;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.5px;
		margin-bottom: $space-xs;

		svg {
			width: 14px;
			height: 14px;
		}

		.method-tabs__bloc--definition & {
			color: $c-secondary;
		}

		.method-tabs__bloc--attention & {
			color: $c-primary-hover;
		}
	}

	.method-tabs__fiche-fade {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 120px;
		background: linear-gradient(transparent 0%, rgba(255, 255, 255, 0.5) 30%, rgba(255, 255, 255, 0.85) 60%, #fff 100%);
		backdrop-filter: blur(3px);
		display: flex;
		align-items: flex-end;
		justify-content: center;
		padding-bottom: $space-sm;
		pointer-events: none;

		span {
			font-size: $font-caption;
			font-weight: 500;
			color: $c-secondary;
			background: rgba(255, 255, 255, 0.9);
			padding: 6px 16px;
			border-radius: $radius-full;
			border: 1px solid $c-secondary-bg;
			animation: pulseScroll 2s ease-in-out infinite;
		}
	}

	@keyframes pulseScroll {
		0%, 100% {
			opacity: 0.7;
			transform: translateY(0);
		}
		50% {
			opacity: 1;
			transform: translateY(-3px);
		}
	}

	/* ═══════════════════════════════════════════
	   QCM
	   ═══════════════════════════════════════════ */
	.method-tabs__qcm {
		padding: 36px 40px;

		h3 {
			font-size: 20px;
			font-weight: 700;
			margin: 0 0 4px;
			color: $c-text-dark;
		}
	}

	.method-tabs__qcm-meta {
		font-size: $font-caption;
		color: $c-text-muted;
		margin-bottom: 28px;
	}

	.method-tabs__qcm-question {
		font-size: 15px;
		font-weight: 600;
		color: $c-text-dark;
		margin-bottom: $space-sm;
		line-height: 1.5;
	}

	.method-tabs__qcm-options {
		display: flex;
		flex-direction: column;
		gap: 10px;
		margin-bottom: $space-sm;
	}

	.method-tabs__qcm-option {
		display: flex;
		align-items: center;
		gap: $space-xs;
		padding: 14px 18px;
		border: 1.5px solid $c-border;
		border-radius: $radius-lg;
		cursor: pointer;
		transition: all 0.2s ease;
		font-size: $font-small;
		color: $c-text-dark;

		&:hover:not(.is-correct):not(.is-incorrect) {
			border-color: $c-secondary;
			background: $c-accent-bg;
		}

		&.is-correct {
			border-color: $c-success;
			background: $c-success-bg;

			.method-tabs__qcm-radio {
				border-color: $c-success;
				background: $c-success;

				&::after {
					content: '✓';
					color: $c-white;
					font-size: $font-caption;
					font-weight: 700;
				}
			}
		}

		&.is-incorrect {
			border-color: $c-error;
			background: $c-error-bg;

			.method-tabs__qcm-radio {
				border-color: $c-error;
				background: $c-error;

				&::after {
					content: '✕';
					color: $c-white;
					font-size: $font-caption;
					font-weight: 700;
				}
			}
		}
	}

	.method-tabs__qcm-radio {
		width: 20px;
		height: 20px;
		border: 2px solid $c-border;
		border-radius: 50%;
		flex-shrink: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: all 0.2s ease;
	}

	.method-tabs__qcm-feedback {
		padding: $space-xs $space-sm;
		border-radius: $radius-md;
		font-size: $font-caption;
		font-weight: 600;
		display: none;
		align-items: center;
		gap: $space-xs;

		&.is-visible {
			display: flex;
		}

		&--success {
			background: rgba(16, 185, 129, 0.15);
			color: $c-success-dark;
		}

		&--error {
			background: $c-error-bg;
			color: $c-error;
		}
	}

	/* ═══════════════════════════════════════════
	   FLASHCARD
	   ═══════════════════════════════════════════ */
	.method-tabs__flashcard {
		padding: 36px 40px;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.method-tabs__fc-title {
		font-size: 20px;
		font-weight: 700;
		margin-bottom: 20px;
		text-align: center;
		color: $c-text-dark;
	}

	.method-tabs__fc-progress {
		width: 100%;
		max-width: 500px;
		display: flex;
		align-items: center;
		justify-content: space-between;
		margin-bottom: $space-xs;
	}

	.method-tabs__fc-progress-label {
		font-size: $font-caption;
		color: $c-text-muted;
		font-weight: 500;
	}

	.method-tabs__fc-bar {
		flex: 1;
		height: 6px;
		background: $c-muted;
		border-radius: 3px;
		margin: 0 $space-sm;
		overflow: hidden;
	}

	.method-tabs__fc-bar-fill {
		height: 100%;
		background: $gradient-cta;
		border-radius: 3px;
		transition: width 0.4s ease;
	}

	.method-tabs__fc-card-wrapper {
		width: 100%;
		max-width: 500px;
		perspective: 1000px;
		margin: $space-sm 0;
		cursor: pointer;
	}

	.method-tabs__fc-card {
		position: relative;
		width: 100%;
		min-height: 280px;
		transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
		transform-style: preserve-3d;

		&.is-flipped {
			transform: rotateY(180deg);
		}
	}

	.method-tabs__fc-face {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		backface-visibility: hidden;
		border-radius: $radius-lg;
		overflow: hidden;
		box-shadow: $shadow-sm;
		border: 1px solid $c-muted;
		background: $c-white;
	}

	.method-tabs__fc-back {
		transform: rotateY(180deg);
	}

	.method-tabs__fc-header {
		padding: 14px 24px;
		display: flex;
		justify-content: space-between;
		align-items: center;
		font-size: $font-caption;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.5px;

		&--question {
			background: $gradient-cta;
			color: $c-white;
		}

		&--answer {
			background: $c-muted;
			color: $c-text-gray;
		}
	}

	.method-tabs__fc-body {
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 40px 32px;
		min-height: 180px;
		font-size: $font-body-large;
		font-weight: 500;
		color: $c-text-dark;
		text-align: center;
		line-height: 1.5;

		.method-tabs__fc-back & {
			font-size: $font-medium;
			color: $c-text-gray;
			line-height: 1.7;
		}
	}

	.method-tabs__fc-footer {
		background: $c-muted;
		padding: $space-xs;
		text-align: center;
		font-size: $font-caption;
		color: $c-text-muted;
	}

	.method-tabs__fc-actions {
		display: flex;
		gap: $space-sm;
		justify-content: center;
		margin-top: $space-xs;
		opacity: 0;
		pointer-events: none;
		transition: opacity 0.3s ease;

		&.is-visible {
			opacity: 1;
			pointer-events: auto;
		}
	}

	.method-tabs__fc-btn {
		padding: $space-xs $space-lg;
		border-radius: $radius-full;
		font-family: inherit;
		font-size: $font-small;
		font-weight: 600;
		cursor: pointer;
		transition: all 0.2s ease;

		&--no {
			background: $c-white;
			border: 2px solid $c-error;
			color: $c-error;

			&:hover {
				background: $c-error-bg;
			}
		}

		&--yes {
			background: $c-success;
			border: 2px solid $c-success;
			color: $c-white;

			&:hover {
				background: $c-success-dark;
				border-color: $c-success-dark;
			}
		}
	}

	/* ═══════════════════════════════════════════
	   ANNALE
	   ═══════════════════════════════════════════ */
	.method-tabs__annale {
		position: relative;
	}

	.method-tabs__annale-content {
		padding: 36px 40px;
		max-height: 460px;
		overflow-y: auto;

		&::-webkit-scrollbar {
			width: 4px;
		}
		&::-webkit-scrollbar-thumb {
			background: $c-border;
			border-radius: $radius-xs;
		}

		h3 {
			font-size: 20px;
			font-weight: 700;
			margin: 0 0 $space-xs;
			color: $c-text-dark;
		}
	}

	.method-tabs__annale-tag {
		display: inline-block;
		background: $c-primary;
		color: $c-white;
		font-size: 11px;
		font-weight: 600;
		padding: 3px 10px;
		border-radius: $radius-full;
		margin-bottom: $space-sm;
	}

	.method-tabs__annale-meta {
		display: flex;
		align-items: center;
		gap: $space-xs;
		background: $c-muted;
		border-radius: $radius-md;
		padding: $space-xs 20px;
		margin-bottom: 20px;
		font-size: $font-caption;
		color: $c-text-gray;

		svg {
			width: 14px;
			height: 14px;
			color: $c-text-muted;
			flex-shrink: 0;
		}
	}

	.method-tabs__annale-section {
		margin-bottom: 20px;
	}

	.method-tabs__annale-label {
		display: inline-flex;
		align-items: center;
		gap: 6px;
		font-size: $font-caption;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.5px;
		margin-bottom: 10px;

		svg {
			width: 15px;
			height: 15px;
		}

		&--enonce {
			color: $c-text-dark;
		}

		&--video {
			color: $c-primary;
		}

		&--correction {
			color: $c-success-dark;
		}
	}

	.method-tabs__annale-enonce {
		font-size: 15px;
		line-height: 1.6;
		color: $c-text-dark;
		font-style: italic;
		margin: 0;
	}

	.method-tabs__annale-mini-player {
		display: flex;
		align-items: center;
		gap: 14px;
		background: linear-gradient(135deg, rgba($primary, 0.06), rgba($secondary, 0.06));
		border: 1.5px solid rgba($secondary, 0.15);
		border-radius: $radius-lg;
		padding: $space-xs 18px;
		cursor: pointer;
		transition: all 0.2s ease;

		&:hover {
			border-color: $c-secondary;
			box-shadow: $shadow-sm;
		}
	}

	.method-tabs__annale-play-icon {
		width: 40px;
		height: 40px;
		background: $gradient-cta;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		flex-shrink: 0;

		svg {
			width: 16px;
			height: 16px;
			color: $c-white;
			margin-left: 2px;
		}
	}

	.method-tabs__annale-mini-info {
		display: flex;
		flex-direction: column;
		gap: 2px;
	}

	.method-tabs__annale-mini-title {
		font-size: $font-caption;
		font-weight: 600;
		color: $c-text-dark;
	}

	.method-tabs__annale-mini-dur {
		font-size: $font-caption;
		color: $c-text-muted;
	}

	.method-tabs__annale-plan {
		display: flex;
		flex-direction: column;
		gap: $space-xs;
		padding: $space-sm 20px;
		background: $c-success-bg;
		border: 1px solid rgba(16, 185, 129, 0.2);
		border-radius: $radius-lg;
	}

	.method-tabs__annale-plan-item {
		display: flex;
		gap: $space-xs;
	}

	.method-tabs__annale-plan-num {
		font-size: $font-medium;
		font-weight: 800;
		background: $gradient-cta;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
		flex-shrink: 0;
		min-width: 24px;
	}

	.method-tabs__annale-plan-text {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}

	.method-tabs__annale-plan-title {
		font-size: $font-small;
		font-weight: 600;
		color: $c-text-dark;
		line-height: 1.4;
	}

	.method-tabs__annale-plan-sub {
		display: flex;
		flex-direction: column;
		gap: 2px;
		padding-left: $space-xs;
		border-left: 2px solid $c-border;

		span {
			font-size: $font-caption;
			color: $c-text-gray;
			line-height: 1.5;
		}
	}

	.method-tabs__annale-fade {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 80px;
		background: linear-gradient(transparent, $c-white);
		pointer-events: none;
	}

	/* ═══════════════════════════════════════════
	   FICHE VIDÉO
	   ═══════════════════════════════════════════ */
	.method-tabs__fiche-video {
		display: grid;
		grid-template-columns: 1.1fr 0.9fr;
		min-height: 420px;
	}

	.method-tabs__fv-player {
		position: relative;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		background: $gradient-cta;
		min-height: 420px;

		&--video {
			padding: 0;
			min-height: 0;
			aspect-ratio: 16 / 9;
			height: 100%;

			iframe {
				width: 100%;
				height: 100%;
				border: 0;
			}

			.method-tabs__fv-badge {
				z-index: 10;
			}
		}
	}

	.method-tabs__fv-badge {
		position: absolute;
		top: $space-sm;
		left: $space-sm;
		background: rgba(255, 255, 255, 0.2);
		backdrop-filter: blur(8px);
		color: $c-white;
		font-size: 11px;
		font-weight: 600;
		padding: 5px 14px;
		border-radius: $radius-full;
		display: flex;
		align-items: center;
		gap: 5px;
		z-index: 2;
		border: 1px solid rgba(255, 255, 255, 0.2);

		svg {
			width: 12px;
			height: 12px;
		}
	}

	.method-tabs__fv-duration {
		position: absolute;
		bottom: $space-sm;
		right: $space-sm;
		background: rgba(0, 0, 0, 0.6);
		color: $c-white;
		font-size: $font-caption;
		font-weight: 600;
		padding: 2px 8px;
		border-radius: $radius-xs;
		z-index: 2;
	}

	.method-tabs__fv-playlist {
		display: flex;
		flex-direction: column;
		border-left: 1px solid $c-muted;
	}

	.method-tabs__fv-playlist-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: $space-sm 20px;
		border-bottom: 1px solid $c-muted;
	}

	.method-tabs__fv-playlist-title {
		font-size: $font-small;
		font-weight: 700;
		color: $c-text-dark;
	}

	.method-tabs__fv-playlist-count {
		font-size: $font-caption;
		color: $c-text-muted;
		font-weight: 500;
	}

	.method-tabs__fv-playlist-items {
		flex: 1;
		overflow-y: auto;

		&::-webkit-scrollbar {
			width: 3px;
		}
		&::-webkit-scrollbar-thumb {
			background: $c-border;
			border-radius: 3px;
		}
	}

	.method-tabs__fv-item {
		display: flex;
		align-items: center;
		gap: 10px;
		padding: 10px 20px;
		cursor: pointer;
		transition: background 0.15s ease;
		position: relative;

		&:hover {
			background: $c-muted;
		}

		&--active {
			background: $c-accent-bg;
			border-left: 3px solid $c-secondary;

			.method-tabs__fv-item-num {
				color: $c-secondary;
			}
		}

		&--locked {
			opacity: 0.5;
			cursor: default;

			.method-tabs__fv-item-thumb {
				filter: grayscale(0.8);
				opacity: 0.6;
			}

			.method-tabs__fv-item-name {
				color: $c-text-muted;
			}
		}
	}

	.method-tabs__fv-item-num {
		font-size: $font-caption;
		font-weight: 600;
		color: $c-text-muted;
		width: 18px;
		text-align: center;
		flex-shrink: 0;
	}

	.method-tabs__fv-item-thumb {
		width: 44px;
		height: 28px;
		border-radius: $radius-xs;
		background: $gradient-cta;
		flex-shrink: 0;
	}

	.method-tabs__fv-item-info {
		flex: 1;
		display: flex;
		justify-content: space-between;
		align-items: center;
		gap: $space-xs;
		min-width: 0;
	}

	.method-tabs__fv-item-name {
		font-size: $font-caption;
		font-weight: 500;
		color: $c-text-dark;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.method-tabs__fv-item-dur {
		font-size: 11px;
		color: $c-text-muted;
		flex-shrink: 0;
	}

	.method-tabs__fv-lock {
		width: 14px;
		height: 14px;
		color: $c-text-muted;
		flex-shrink: 0;
	}

	/* ═══════════════════════════════════════════
	   CTA BOTTOM
	   ═══════════════════════════════════════════ */
	.method-tabs__cta-wrapper {
		text-align: center;
		margin-top: $space-lg;
		position: relative;
		z-index: 1;
	}

	.method-tabs__cta-intro {
		font-size: 15px;
		font-weight: 500;
		color: $c-text-gray;
		margin: 0 0 $space-sm;
	}

	.method-tabs__cta {
		display: inline-flex;
		align-items: center;
		gap: $space-xs;
		padding: $space-sm 40px;
		background: $gradient-cta;
		color: $c-white;
		font-family: inherit;
		font-size: $font-medium;
		font-weight: 700;
		border: none;
		border-radius: $radius-full;
		cursor: pointer;
		box-shadow: $shadow-cta;
		transition: all 0.3s ease;
		text-decoration: none;

		&:hover {
			transform: translateY(-2px);
			box-shadow: $shadow-cta-hover;
		}
	}

	/* ═══════════════════════════════════════════
	   RESPONSIVE
	   ═══════════════════════════════════════════ */
	@media (max-width: 900px) {
		padding: $space-xl $space-sm;

		.method-tabs__title {
			font-size: 28px;
		}

		.method-tabs__nav {
			flex-wrap: nowrap;
			justify-content: flex-start;
			overflow-x: auto;
			-webkit-overflow-scrolling: touch;
			scrollbar-width: none;
			padding-bottom: 4px;
			gap: 6px;

			&::-webkit-scrollbar {
				display: none;
			}
		}

		.method-tabs__tab {
			padding: $space-xs 14px;
			font-size: $font-caption;
			gap: 4px;
			flex-shrink: 0;
		}

		.method-tabs__tab-label--full {
			display: none;
		}

		.method-tabs__tab-label--short {
			display: inline;
		}

		.method-tabs__card {
			min-height: auto;
			border-radius: $radius-lg;
		}

		.method-tabs__split,
		.method-tabs__fiche-video {
			grid-template-columns: 1fr;
		}

		.method-tabs__split-visual {
			min-height: 220px;
		}

		.method-tabs__split-info {
			padding: $space-md 20px;

			h3 {
				font-size: $font-body-large;
			}

			p {
				font-size: $font-caption;
			}
		}

		.method-tabs__video-placeholder {
			min-height: 220px;
		}

		.method-tabs__play-btn {
			width: 56px;
			height: 56px;

			svg {
				width: 22px;
				height: 22px;
			}
		}

		.method-tabs__fiche-content,
		.method-tabs__qcm,
		.method-tabs__flashcard,
		.method-tabs__annale-content {
			padding: $space-md 20px;
		}

		.method-tabs__fc-card-wrapper {
			max-width: 100%;
		}

		.method-tabs__fc-card {
			min-height: 240px;
		}

		.method-tabs__fc-body {
			font-size: $font-medium;
			padding: $space-lg $space-md;
			min-height: 150px;
		}

		.method-tabs__fc-actions {
			flex-direction: column;
			gap: 10px;
		}

		.method-tabs__fc-btn {
			width: 100%;
			text-align: center;
		}

		.method-tabs__fv-playlist {
			border-left: none;
			border-top: 1px solid $c-muted;
		}

		.method-tabs__fv-playlist-items {
			max-height: 180px;
		}

		.method-tabs__cta {
			width: 100%;
			max-width: 100%;
			box-sizing: border-box;
			justify-content: center;
			font-size: 15px;
			padding: 14px 28px;
		}
	}

	@media (max-width: 480px) {
		padding: $space-lg $space-xs;

		.method-tabs__title {
			font-size: 24px;
		}

		.method-tabs__badge {
			font-size: $font-caption;
			padding: 5px $space-xs;
		}

		.method-tabs__tab {
			padding: $space-xs 10px;
			font-size: 11px;

			.method-tabs__tab-label--short {
				display: none;
			}
		}

		.method-tabs__split-visual,
		.method-tabs__video-placeholder {
			min-height: 180px;
		}

		.method-tabs__play-btn {
			width: 48px;
			height: 48px;

			svg {
				width: 18px;
				height: 18px;
			}
		}

		.method-tabs__fiche-content,
		.method-tabs__qcm,
		.method-tabs__flashcard,
		.method-tabs__annale-content {
			padding: 20px $space-sm;
			max-height: 360px;
		}

		.method-tabs__qcm-option {
			padding: 10px $space-xs;
			font-size: $font-caption;
			gap: $space-xs;
		}

		.method-tabs__fc-card {
			min-height: 210px;
		}

		.method-tabs__fc-body {
			font-size: 15px;
			padding: 28px 20px;
			min-height: 130px;
		}

		.method-tabs__cta {
			padding: 12px 20px;
			font-size: 14px;
		}
	}

	/* ═══════════════════════════════════════════
	   INFOBOX STYLES (for Cours écrits tab)
	   ═══════════════════════════════════════════ */
	.jurible-infobox {
		display: flex;
		flex-direction: column;
		padding: 20px $space-md;
		gap: $space-xs;
		border-radius: $radius-lg;
		width: 100%;
		box-sizing: border-box;
		margin: $space-sm 0;
	}

	.jurible-infobox-header {
		display: flex;
		align-items: center;
		gap: $space-xs;
	}

	.jurible-infobox-icon {
		font-size: $font-small;
		color: initial !important;
		font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif !important;
	}

	.jurible-infobox-title {
		font-family: inherit;
		font-weight: 700;
		font-size: 11px;
		line-height: 18px;
		letter-spacing: 0.5px;
		text-transform: uppercase;
	}

	.jurible-infobox-content {
		margin: 0 !important;
		font-size: $font-small;
		line-height: 1.7;
		color: $c-text-gray;
	}

	.jurible-infobox-important {
		background: $c-info-bg;

		.jurible-infobox-title {
			color: $c-info;
		}
	}

	.jurible-infobox-definition {
		background: $c-muted;

		.jurible-infobox-title {
			color: $c-text-muted;
		}
	}

	.jurible-infobox-attention {
		background: $c-error-bg;

		.jurible-infobox-title {
			color: $c-error;
		}
	}

	.jurible-infobox-retenir {
		background: $c-warning-bg;

		.jurible-infobox-title {
			color: $c-warning;
		}
	}

	.jurible-infobox-exemple {
		background: linear-gradient(100.94deg, rgba($primary, 0.08) 0%, rgba($secondary, 0.08) 100%);

		.jurible-infobox-title {
			color: $c-primary;
		}
	}

	.jurible-infobox-astuce {
		background: $c-success-bg;

		.jurible-infobox-title {
			color: $c-success;
		}
	}

	.jurible-infobox-conditions {
		background: $c-muted;

		.jurible-infobox-title {
			color: $c-text-muted;
		}
	}
}
