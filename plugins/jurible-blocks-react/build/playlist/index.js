(()=>{"use strict";var e,l={42:(e,l,i)=>{const t=window.wp.blocks,o=window.wp.i18n,s=window.wp.blockEditor,n=window.wp.element,c=window.wp.apiFetch;var r=i.n(c);const a=window.ReactJSXRuntime,d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"jurible/playlist","version":"1.0.0","title":"Playlist Jurible","category":"media","icon":"playlist-video","description":"Affiche une playlist de vidÃ©os Bunny Stream.","keywords":["playlist","video","bunny","cours"],"supports":{"html":false,"align":["wide","full"]},"attributes":{"collectionId":{"type":"string","default":""},"collectionName":{"type":"string","default":""},"videoCount":{"type":"number","default":0}},"textdomain":"jurible-blocks","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}');(0,t.registerBlockType)(d.name,{...d,edit:function({attributes:e,setAttributes:l}){const{collectionId:i,collectionName:t,videoCount:c}=e,[d,u]=(0,n.useState)([]),[p,v]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null),y=(0,s.useBlockProps)();return(0,n.useEffect)(()=>{v(!0),m(null),r()({path:"/jurible/v1/bunny/collections?filter=Fiches"}).then(e=>{e.success&&e.collections?u(e.collections):m("Erreur lors du chargement des collections"),v(!1)}).catch(e=>{console.error("Error loading collections:",e),m(e.message||"Erreur de connexion"),v(!1)})},[]),(0,a.jsx)("div",{...y,children:(0,a.jsxs)("div",{className:"playlist-editor",children:[(0,a.jsxs)("div",{className:"playlist-editor-header",children:[(0,a.jsx)("span",{className:"playlist-icon",children:"ðŸŽ¬"}),(0,a.jsx)("span",{className:"playlist-title",children:"Playlist VidÃ©o"})]}),(0,a.jsx)("div",{className:"playlist-editor-content",children:p?(0,a.jsx)("div",{className:"playlist-editor-placeholder",children:"Chargement des collections..."}):h?(0,a.jsx)("div",{className:"playlist-editor-error",children:h}):0===d.length?(0,a.jsx)("div",{className:"playlist-editor-placeholder",children:'Aucune collection "Fiches" trouvÃ©e'}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"playlist-field",children:[(0,a.jsx)("label",{htmlFor:"collection-select",children:(0,o.__)("Collection Bunny","jurible-blocks")}),(0,a.jsxs)("select",{id:"collection-select",value:i,onChange:e=>{const i=e.target.value;if(!i)return void l({collectionId:"",collectionName:"",videoCount:0});const t=d.find(e=>e.id===i);t&&l({collectionId:t.id,collectionName:t.name,videoCount:t.videoCount})},children:[(0,a.jsx)("option",{value:"",children:(0,o.__)("-- SÃ©lectionner une collection --","jurible-blocks")}),d.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.videoCount," vidÃ©os)"]},e.id))]})]}),i&&(0,a.jsxs)("div",{className:"playlist-info",children:[(0,a.jsx)("strong",{children:c})," vidÃ©os dans cette collection"]})]})})]})})},save:function({attributes:e}){const{collectionId:l,collectionName:i,videoCount:t}=e,o=s.useBlockProps.save();return l?(0,a.jsx)("div",{...o,className:"jurible-playlist-container","data-collection-id":l,"data-collection-name":i,"data-video-count":t,children:(0,a.jsx)("div",{className:"playlist-loading",children:"Chargement de la playlist..."})}):null}})}},i={};function t(e){var o=i[e];if(void 0!==o)return o.exports;var s=i[e]={exports:{}};return l[e](s,s.exports,t),s.exports}t.m=l,e=[],t.O=(l,i,o,s)=>{if(!i){var n=1/0;for(d=0;d<e.length;d++){for(var[i,o,s]=e[d],c=!0,r=0;r<i.length;r++)(!1&s||n>=s)&&Object.keys(t.O).every(e=>t.O[e](i[r]))?i.splice(r--,1):(c=!1,s<n&&(n=s));if(c){e.splice(d--,1);var a=o();void 0!==a&&(l=a)}}return l}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[i,o,s]},t.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return t.d(l,{a:l}),l},t.d=(e,l)=>{for(var i in l)t.o(l,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:l[i]})},t.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={2584:0,7360:0};t.O.j=l=>0===e[l];var l=(l,i)=>{var o,s,[n,c,r]=i,a=0;if(n.some(l=>0!==e[l])){for(o in c)t.o(c,o)&&(t.m[o]=c[o]);if(r)var d=r(t)}for(l&&l(i);a<n.length;a++)s=n[a],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},i=globalThis.webpackChunkjurible_blocks_react=globalThis.webpackChunkjurible_blocks_react||[];i.forEach(l.bind(null,0)),i.push=l.bind(null,i.push.bind(i))})();var o=t.O(void 0,[7360],()=>t(42));o=t.O(o)})();